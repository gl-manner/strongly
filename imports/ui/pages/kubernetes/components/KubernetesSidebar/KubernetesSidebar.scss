// /imports/ui/components/kubernetes/KubernetesSidebar/KubernetesSidebar.scss

// NOTE: The Kubernetes sidebar now uses the standard .sidebar class from NobleUI
// This file only contains Kubernetes-specific additions like the cluster selector

// Enhanced Cluster Selector - Kubernetes specific styling
.sidebar {

  // Custom Kubernetes logo styling
  .sidebar-header .sidebar-brand .kubernetes-logo {
    width: 20px;
    height: 20px;
    stroke-width: 2px;
    flex-shrink: 0;
    margin-right: 8px;
    color: #6571ff;
    transition: all 0.3s ease;
  }

  .cluster-selector {
    position: relative;
    margin-bottom: 1rem;

    .cluster-dropdown {
      position: relative;

      .cluster-selector-btn {
        width: 100%;
        height: 44px;
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 0 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.875rem;

        &:hover {
          background: #f1f3f4;
          border-color: #ced4da;
        }

        &.active {
          border-color: #6571ff;
          box-shadow: 0 0 0 2px rgba(101, 113, 255, 0.25);
        }

        .cluster-info {
          display: flex;
          align-items: center;
          overflow: hidden;

          .cluster-name {
            margin-left: 8px;
            font-weight: 500;
            white-space: nowrap;
            transition: all 0.3s ease;
          }
        }

        .dropdown-arrow {
          width: 16px;
          height: 16px;
          color: #adb5bd;
          transition: transform 0.2s ease;
          flex-shrink: 0;
        }

        &.active .dropdown-arrow {
          transform: rotate(180deg);
        }
      }

      .cluster-dropdown-menu {
        position: absolute;
        top: calc(100% + 4px);
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        z-index: 1050;
        overflow: hidden;
        animation: dropdownFadeIn 0.15s ease-out;

        .cluster-dropdown-item {
          width: 100%;
          height: 40px;
          padding: 0 12px;
          display: flex;
          align-items: center;
          background: none;
          border: none;
          cursor: pointer;
          transition: background-color 0.15s ease;
          font-size: 0.875rem;
          text-align: left;

          &:hover {
            background-color: #f1f3f4;
          }

          &.active {
            background-color: #6571ff;
            color: white;

            .cluster-status-dot {
              border-color: white;
            }

            .check-icon {
              color: white;
            }
          }

          .cluster-name {
            margin-left: 8px;
            flex: 1;
            font-weight: 500;
          }

          .check-icon {
            width: 16px;
            height: 16px;
            color: #6571ff;
            margin-left: auto;
          }
        }
      }
    }
  }

  // Cluster status dots
  .cluster-status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
    border: 2px solid transparent;

    &.healthy {
      background-color: #22c55e;
      border-color: #22c55e;
    }

    &.warning {
      background-color: #f59e0b;
      border-color: #f59e0b;
    }

    &.error {
      background-color: #ef4444;
      border-color: #ef4444;
    }

    &.unknown {
      background-color: #6b7280;
      border-color: #6b7280;
    }
  }

  // Fix toggle icon states - show X when expanded, hamburger when collapsed
  .sidebar .sidebar-header .sidebar-toggler {
    span {
      &:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
      }

      &:nth-child(2) {
        opacity: 0;
      }

      &:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -6px);
      }
    }
  }

  // When sidebar is collapsed, show hamburger menu
  .main-wrapper.sidebar-folded .sidebar .sidebar-header .sidebar-toggler {
    span {
      &:nth-child(1) {
        transform: rotate(0deg) translate(0px, 0px);
      }

      &:nth-child(2) {
        opacity: 1;
      }

      &:nth-child(3) {
        transform: rotate(0deg) translate(0px, 0px);
      }
    }
  }

  // Responsive adjustments for cluster selector in collapsed sidebar
  .main-wrapper.sidebar-folded .sidebar .cluster-selector,
  .main-wrapper.open-sidebar-folded .sidebar .cluster-selector {
    .cluster-dropdown {
      .cluster-selector-btn {

        // In collapsed state, show only the status dot
        .cluster-info .cluster-name {
          display: none;
        }

        .dropdown-arrow {
          display: none;
        }

        // Make button smaller and centered
        width: 46px;
        height: 46px;
        padding: 0;
        justify-content: center;
        margin: 0 auto;
      }

      // Position dropdown to the right when collapsed
      .cluster-dropdown-menu {
        left: calc(100% + 8px);
        top: 0;
        width: 200px;
      }
    }
  }

  // When sidebar is expanded on hover, show the cluster names again
  .main-wrapper.open-sidebar-folded .sidebar .cluster-selector {
    .cluster-dropdown {
      .cluster-selector-btn {
        width: 100%;
        height: 44px;
        padding: 0 12px;
        justify-content: space-between;
        margin: 0;

        .cluster-info .cluster-name {
          display: block;
        }

        .dropdown-arrow {
          display: block;
        }
      }

      .cluster-dropdown-menu {
        left: 0;
        width: 100%;
      }
    }
  }

  // Dark mode styling
  body.dark-mode {
    .sidebar .cluster-selector {
      .cluster-dropdown {
        .cluster-selector-btn {
          background: #343a40;
          border-color: #495057;
          color: #e9ecef;

          &:hover {
            background: #495057;
          }

          .dropdown-arrow {
            color: #ced4da;
          }
        }

        .cluster-dropdown-menu {
          background: #343a40;
          border-color: #495057;

          .cluster-dropdown-item {
            color: #e9ecef;

            &:hover {
              background-color: #495057;
            }

            &.active {
              background-color: #6571ff;
            }
          }
        }
      }
    }
  }

  // Dropdown animation
  @keyframes dropdownFadeIn {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  // Mobile responsive adjustments
  @media (max-width: 991.98px) {
    .sidebar .cluster-selector {

      // On mobile, always show full cluster selector
      .cluster-dropdown {
        .cluster-selector-btn {
          width: 100% !important;
          height: 44px !important;
          padding: 0 12px !important;
          justify-content: space-between !important;
          margin: 0 !important;

          .cluster-info .cluster-name {
            display: block !important;
          }

          .dropdown-arrow {
            display: block !important;
          }
        }

        .cluster-dropdown-menu {
          left: 0 !important;
          width: 100% !important;
        }
      }
    }
  }
}